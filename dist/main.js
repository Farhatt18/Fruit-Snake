!function(){"use strict";var t,i,s;t=class{constructor(t,i,s){this.ctx=t,this.tileSize=i,this.grid=s,this.pos=[{x:10,y:10}]}get head(){return this.pos[0]}drawSnake(){this.ctx.fillStyle="green",this.pos.forEach((t=>{this.ctx.fillRect(t.x*this.tileSize,t.y*this.tileSize,this.grid,this.grid)}))}move(t,i){const s={...this.head};switch(t){case"up":s.y=(s.y-1+i)%i;break;case"down":s.y=(s.y+1)%i;break;case"left":s.x=(s.x-1+i)%i;break;case"right":s.x=(s.x+1)%i}this.pos.unshift(s),this.pos.pop()}grow(){const t={...this.pos[this.pos.length-1]};this.pos.push(t)}},i=class{constructor(t,i,s,e){this.grid=i,this.ctx=t,this.snake=s,this.type=e,this.position=this.getRandomFruitPosition()}drawFruit(){this.ctx.fillStyle="good"===this.type?"yellow":"red",this.ctx.fillRect(this.position.x*this.grid,this.position.y*this.grid,this.grid,this.grid)}getRandomFruitPosition(){let t;do{t={x:Math.floor(Math.random()*this.grid),y:Math.floor(Math.random()*this.grid)}}while(this.isPositionOccupied(t));return t}isPositionOccupied(t){return this.snake.pos.some((i=>i.x===t.x&&i.y===t.y))}},s=class{constructor(s){this.screen=s,this.ctx=s.getContext("2d"),this.direction="right",this.score=0,this.level=1,this.tileSize=24,this.grid=s.width/this.tileSize,this.snake=new t(this.ctx,this.tileSize,this.grid),this.goodFruit=new i(this.ctx,this.grid,this.snake,"good"),this.badFruit=new i(this.ctx,this.grid,this.snake,"bad"),this.isPaused=!1,this.lastTimestamp=0,this.frameInterval=200,this.mainSound=new Audio("./assets/sounds/music.mp3"),this.mainSound.volume=.5,this.mainSound.loop=!0,this.isMuted=!1,this.buttonSound=new Audio("./assets/sounds/click.mp3"),this.buttonSound.volume=.2,this.buttonSound.loop=!1,this.eatenSound=new Audio("./assets/sounds/eating.mp3"),this.eatenSound.volume=.2,this.eatenSound.loop=!1,this.hitSound=new Audio("./assets/sounds/pow.mp3"),this.hitSound.volume=.2,this.hitSound.loop=!1;const e=document.getElementById("mute"),o=()=>{e.src=this.mainSound.muted?"./assets/mute.png":"./assets/unmute.png"};e.addEventListener("click",(()=>{this.muteToggle(),o()})),o()}togglePause(){this.isPaused=!this.isPaused}muteToggle(){this.isMuted=!this.isMuted,this.mainSound.muted=this.isMuted,this.buttonSound.muted=this.isMuted,this.eatenSound.muted=this.isMuted,this.hitSound.muted=this.isMuted}isEatingFruit(){const t=this.snake.pos[0],i="good"===this.goodFruit.type?this.goodFruit:this.badFruit;return Math.floor(t.x)===Math.floor(i.position.x)&&Math.floor(t.y)===Math.floor(i.position.y)}move(t){if(!this.isPaused&&t-this.lastTimestamp>=this.frameInterval){if(this.lastTimestamp=t,this.snake.move(this.direction,this.grid+1),this.isCollision()||this.isOutOfBounds()||this.checkCollision())return this.hitSound.play(),void this.endGame();this.isEatingFruit()&&(this.snake.grow(),this.score++,this.score%5==0&&(this.level++,this.frameInterval=150,10===this.score&&(this.frameInterval=100)),this.goodFruit.position=this.goodFruit.getRandomFruitPosition(),this.badFruit.position=this.badFruit.getRandomFruitPosition(),this.eatenSound.play())}}isCollision(){const t=this.snake.head;return this.snake.pos.slice(1).some((i=>i.x===t.x&&i.y===t.y))}isOutOfBounds(){const t=this.snake.head;return t.x<0||t.x>=this.grid||t.y<0||t.y>=this.grid}checkCollision(){const t=this.snake.head,i=this.badFruit.position;return Math.floor(t.x)===Math.floor(i.x)&&Math.floor(t.y)===Math.floor(i.y)}draw(){this.ctx.clearRect(0,0,this.screen.width,this.screen.height),this.snake.drawSnake(),this.goodFruit.drawFruit(),this.badFruit.drawFruit(),this.drawScore()}drawScore(){this.ctx.fillStyle="white",this.ctx.font="20px Arial",this.ctx.fillText(`Score: ${this.score} | Level: ${this.level}`,10,20)}endGame(){this.togglePause();const t=document.getElementById("game-over-modal"),i=document.getElementById("score-display"),s=document.getElementById("level-display"),e=document.getElementById("high-score-display");let o=localStorage.getItem("highScore")||0;this.score>o&&(o=this.score,localStorage.setItem("highScore",o)),i.textContent=`Your Score: ${this.score}`,s.textContent=`Your Level: ${this.level}`,e.textContent=`High Score: ${o}`,setTimeout((()=>{t.style.display="flex"}),0),document.getElementById("restart-btn").addEventListener("click",(()=>{this.buttonSound.play(),t.style.display="none",this.togglePause(),this.resetGame(),this.startGame()}))}resetGame(){this.level=1,this.score=0,this.direction="right",this.goodFruit=new i(this.ctx,this.grid,this.snake,"good"),this.badFruit=new i(this.ctx,this.grid,this.snake,"bad"),this.snake=new t(this.ctx,this.tileSize,this.grid),this.isPaused=!1}handleKeyPress(t){switch(t.key){case"ArrowUp":"down"!==this.direction&&(this.direction="up");break;case"ArrowDown":"up"!==this.direction&&(this.direction="down");break;case"ArrowLeft":"right"!==this.direction&&(this.direction="left");break;case"ArrowRight":"left"!==this.direction&&(this.direction="right")}}updateGoodFruitPosition(){this.goodFruit.position=this.goodFruit.getRandomFruitPosition()}gameLoop(t){this.move(t),this.draw(),this.score%5==0&&0!==this.score&&this.score%100==0&&this.updateGoodFruitPosition(),this.isPaused||requestAnimationFrame(this.gameLoop.bind(this))}startGame(){const t=localStorage.getItem("highScore")||0;document.getElementById("high-score-display").textContent=`High Score: ${t}`,this.mainSound.play(),document.addEventListener("keydown",this.handleKeyPress.bind(this)),requestAnimationFrame(this.gameLoop.bind(this))}},document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("instruction-modal");t.style.display="flex";const i=document.getElementById("snakeCanvas"),e=new s(i);document.getElementById("start-game--btn").addEventListener("click",(function(){e.buttonSound.play(),t.style.display="none",i.style.display="block",e.startGame()}))}))}();
//# sourceMappingURL=main.js.map